<%- include("partials/header") -%>

<body style="background-image: url(BG-login.jpg);">
<div class="container">
</div>
<div>
    <h1 class="container" style="color: white; font-weight: bold; text-shadow: 4px 3px black;">Connoisseur</h1>
</div>
<div>
    <h4 class="container" style="color: white; font-weight: bold; text-shadow:2px 2px black;">Register</h4>
</div>




<form class="container" id="reg-form">


    <label for="username" style="font-size: 20px; color: white; text-shadow: 2px 2px black;">Username:</label><br>
    <i class="bi bi-person-circle" style="color: white; font-size: 20px;"></i>
    <input type="text" id="username" autocomplete="off" name="username" style=" font-size:20px"><br>
    <label for="pwd" style="font-size: 20px; color: white; text-shadow: 2px 2px black;">Password:</label><br>
    <i class="bi bi-lock-fill" style="font-size:20px; color: white;"></i>
    <input type="password" autocomplete="off" id="pwd" name="pwd" style=" font-size:20px"><br>



    <input class="btn btn-primary" type="submit" value="Register" style="margin-top:  30px;font-size:20px; text-shadow:0px 2px black; font-weight: bold;"><br>

</form>

<script>
    const form = document.getElementById('reg-form')
    form.addEventListener('submit', registerUser)

    async function registerUser(event) {
        event.preventDefault()
        const username = document.getElementById('username').value
        const password = document.getElementById('pwd').value

        const result = await fetch('/api/register', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                username,
                password
            })
        }).then((res) => res.json())

        if(result.status === 'ok'){
            // no error
        } else {
            alert(result.error)
        }
    }
</script>



<div class="container" style="margin-top: 30px;">
    <a href="/" style="text-decoration: none underline; color: white; text-shadow: 1px 1px black; font-weight: bold;">Already
        have an account?</a>
</div>
<%- include("partials/footer") -%>
</body>